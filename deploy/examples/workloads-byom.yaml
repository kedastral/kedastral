workloads:
  - name: my-api
    metric: http_rps
    model: byom
    byomURL: http://kedastral-prophet.kedastral.svc.cluster.local:8082/predict
    prometheusURL: http://prometheus.monitoring.svc.cluster.local:9090
    prometheusQuery: rate(http_requests_total{service="my-api"}[5m])
    horizon: 30m
    step: 1m
    interval: 30s
    window: 2h
    targetPerPod: 100
    headroom: 1.2
    minReplicas: 2
    maxReplicas: 50
    upMaxFactorPerStep: 2.0
    downMaxPercentPerStep: 50

  - name: background-worker
    metric: queue_depth
    model: byom
    byomURL: http://kedastral-prophet.kedastral.svc.cluster.local:8082/predict
    prometheusURL: http://prometheus.monitoring.svc.cluster.local:9090
    prometheusQuery: sum(rabbitmq_queue_messages{queue="background_tasks"})
    horizon: 1h
    step: 2m
    interval: 1m
    window: 6h
    targetPerPod: 50
    headroom: 1.5
    minReplicas: 1
    maxReplicas: 20
    upMaxFactorPerStep: 2.0
    downMaxPercentPerStep: 30
