# Multi-workload configuration example with SARIMA model
# Usage: forecaster --config-file=workloads-sarima.yaml

workloads:
  # Web API with daily traffic pattern (hourly data)
  - name: web-api
    metric: http_requests_per_second
    prometheusURL: http://prometheus:9090
    prometheusQuery: sum(rate(http_requests_total{job="web-api"}[1m]))

    # Forecast configuration
    horizon: 30m
    step: 1m
    interval: 5m
    window: 168h  # 1 week of data for training

    # SARIMA model for daily seasonality
    model: sarima
    sarimaP: 1      # Non-seasonal AR
    sarimaD: 1      # Non-seasonal differencing
    sarimaQ: 1      # Non-seasonal MA
    sarimaSP: 1     # Seasonal AR
    sarimaSD: 1     # Seasonal differencing
    sarimaSQ: 1     # Seasonal MA
    sarimaS: 24     # Daily pattern with hourly data

    # Capacity planning
    targetPerPod: 100
    headroom: 1.2
    minReplicas: 2
    maxReplicas: 50
    upMaxFactorPerStep: 2.0
    downMaxPercentPerStep: 30

  # Batch job with weekly pattern (hourly data)
  - name: batch-processor
    metric: queue_depth
    prometheusURL: http://prometheus:9090
    prometheusQuery: rabbitmq_queue_messages{queue="batch-jobs"}

    # Forecast configuration
    horizon: 2h
    step: 5m
    interval: 10m
    window: 336h  # 2 weeks for weekly patterns

    # SARIMA model for weekly seasonality
    model: sarima
    sarimaP: 2      # More AR terms for complex patterns
    sarimaD: 1
    sarimaQ: 1
    sarimaSP: 1
    sarimaSD: 1
    sarimaSQ: 1
    sarimaS: 168    # Weekly pattern with hourly data (24*7=168)

    # Capacity planning
    targetPerPod: 50
    headroom: 1.3
    minReplicas: 1
    maxReplicas: 20
    upMaxFactorPerStep: 3.0
    downMaxPercentPerStep: 50

  # API with 5-minute data and daily pattern
  - name: high-freq-api
    metric: requests_per_second
    prometheusURL: http://prometheus:9090
    prometheusQuery: sum(rate(api_requests_total{service="high-freq"}[1m]))

    # Forecast configuration
    horizon: 15m
    step: 1m
    interval: 1m
    window: 48h  # 2 days

    # SARIMA model for daily pattern with 5-minute data
    model: sarima
    sarimaP: 1
    sarimaD: 1
    sarimaQ: 1
    sarimaSP: 1
    sarimaSD: 1
    sarimaSQ: 1
    sarimaS: 288    # Daily pattern with 5-min data (24*60/5=288)

    # Capacity planning
    targetPerPod: 500
    headroom: 1.1
    minReplicas: 5
    maxReplicas: 200
    upMaxFactorPerStep: 1.5
    downMaxPercentPerStep: 20
